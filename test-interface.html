<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email Signature Feature Test Interface</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .test-section {
            padding: 30px;
            border-bottom: 1px solid #eee;
        }

        .test-section:last-child {
            border-bottom: none;
        }

        .section-title {
            font-size: 1.5em;
            color: #333;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title .icon {
            width: 30px;
            height: 30px;
            background: #667eea;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .test-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .test-card:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .test-card h3 {
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .test-card .status {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .status.pending {
            background: #fff3cd;
            color: #856404;
        }

        .status.success {
            background: #d4edda;
            color: #155724;
        }

        .status.error {
            background: #f8d7da;
            color: #721c24;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-success {
            background: #28a745;
        }

        .btn-danger {
            background: #dc3545;
        }

        .preview-box {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            max-height: 200px;
            overflow-y: auto;
        }

        .log-area {
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            height: 200px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            margin-top: 15px;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e9ecef;
            border-radius: 5px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s ease;
        }

        .signature-preview {
            border: 2px solid #667eea;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            background: white;
        }

        .step-indicator {
            display: flex;
            justify-content: center;
            margin: 20px 0;
            gap: 10px;
        }

        .step {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            background: #ccc;
            transition: all 0.3s ease;
        }

        .step.active {
            background: #667eea;
        }

        .step.completed {
            background: #28a745;
        }

        .hidden {
            display: none;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ Email Signature Feature Test Interface</h1>
            <p>Complete testing with just a few clicks - All data prefilled!</p>
        </div>

        <div class="test-section">
            <div class="section-title">
                <div class="icon">1</div>
                Configuration & Setup
            </div>
            
            <div class="test-grid">
                <div class="test-card">
                    <h3>üîß Test Configuration</h3>
                    <div class="status pending" id="config-status">Pending</div>
                    <p><strong>Base URL:</strong> <span id="base-url">http://localhost:8383</span></p>
                    <p><strong>Test User ID:</strong> <span id="user-id">DW1QbgLTiCgFxOBbvPKdjlLvIgo1</span></p>
                    <p><strong>Test Email:</strong> <span id="test-email">testehakke@gufum.com</span></p>
                    <button class="btn" onclick="testConfiguration()">Test Connection</button>
                </div>

                <div class="test-card">
                    <h3>üîê Authentication</h3>
                    <div class="status pending" id="auth-status">Pending</div>
                    <p>Test token generation and validation</p>
                    <button class="btn" onclick="testAuthentication()">Test Auth</button>
                </div>
            </div>
        </div>

        <div class="test-section">
            <div class="section-title">
                <div class="icon">2</div>
                Signature Creation Tests
            </div>

            <div class="test-grid">
                <div class="test-card">
                    <h3>üìù Professional Signature</h3>
                    <div class="status pending" id="professional-status">Pending</div>
                    <p>Create professional style signature</p>
                    <button class="btn" onclick="createSignature('professional')">Create</button>
                    <button class="btn btn-secondary" onclick="previewSignature('professional')">Preview</button>
                </div>

                <div class="test-card">
                    <h3>üé® Modern Signature</h3>
                    <div class="status pending" id="modern-status">Pending</div>
                    <p>Create modern style signature</p>
                    <button class="btn" onclick="createSignature('modern')">Create</button>
                    <button class="btn btn-secondary" onclick="previewSignature('modern')">Preview</button>
                </div>

                <div class="test-card">
                    <h3>‚ú® Minimal Signature</h3>
                    <div class="status pending" id="minimal-status">Pending</div>
                    <p>Create minimal style signature</p>
                    <button class="btn" onclick="createSignature('minimal')">Create</button>
                    <button class="btn btn-secondary" onclick="previewSignature('minimal')">Preview</button>
                </div>
            </div>
        </div>

        <div class="test-section">
            <div class="section-title">
                <div class="icon">3</div>
                Signature Management
            </div>

            <div class="test-grid">
                <div class="test-card">
                    <h3>üìã Get Signature</h3>
                    <div class="status pending" id="get-status">Pending</div>
                    <p>Retrieve current signature</p>
                    <button class="btn" onclick="getSignature()">Get Signature</button>
                </div>

                <div class="test-card">
                    <h3>üìß Test Signature Preview</h3>
                    <div class="status pending" id="email-status">Pending</div>
                    <p>Test email signature preview generation</p>
                    <button class="btn" onclick="testEmail()">Test Preview</button>
                </div>

                <div class="test-card">
                    <h3>üóëÔ∏è Delete Signature</h3>
                    <div class="status pending" id="delete-status">Pending</div>
                    <p>Remove signature</p>
                    <button class="btn btn-danger" onclick="deleteSignature()">Delete</button>
                </div>
            </div>
        </div>

        <div class="test-section">
            <div class="section-title">
                <div class="icon">4</div>
                Advanced Tests
            </div>

            <div class="test-grid">
                <div class="test-card">
                    <h3>üè¢ Enterprise Bulk</h3>
                    <div class="status pending" id="enterprise-status">Pending</div>
                    <p>Test enterprise bulk operations</p>
                    <button class="btn" onclick="testEnterprise()">Test Bulk</button>
                </div>

                <div class="test-card">
                    <h3>‚ö° Performance</h3>
                    <div class="status pending" id="performance-status">Pending</div>
                    <p>Test concurrent operations</p>
                    <button class="btn" onclick="testPerformance()">Test Performance</button>
                </div>

                <div class="test-card">
                    <h3>üîç Error Handling</h3>
                    <div class="status pending" id="error-status">Pending</div>
                    <p>Test error scenarios</p>
                    <button class="btn" onclick="testErrorHandling()">Test Errors</button>
                </div>
            </div>
        </div>

        <div class="test-section">
            <div class="section-title">
                <div class="icon">5</div>
                Quick Test Runner
            </div>

            <div class="step-indicator">
                <div class="step" id="step-1">1</div>
                <div class="step" id="step-2">2</div>
                <div class="step" id="step-3">3</div>
                <div class="step" id="step-4">4</div>
                <div class="step" id="step-5">5</div>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
            </div>

            <div style="text-align: center;">
                <button class="btn btn-success" onclick="runAllTests()" id="run-all-btn">
                    üöÄ Run All Tests
                </button>
                <button class="btn btn-secondary" onclick="resetTests()" id="reset-btn">
                    üîÑ Reset All Tests
                </button>
            </div>

            <div class="signature-preview" id="signature-preview" style="display: none;">
                <h3>üìù Signature Preview</h3>
                <div id="preview-content"></div>
            </div>
        </div>

        <div class="test-section">
            <div class="section-title">
                <div class="icon">üìä</div>
                Test Results & Logs
            </div>

            <div class="log-area" id="log-area">
                <div>üéØ Email Signature Feature Test Interface Ready</div>
                <div>Click "Run All Tests" to start comprehensive testing...</div>
            </div>
        </div>
    </div>

    <script>
        // Configuration
        const config = {
            baseURL: 'http://localhost:8383',
            testUserId: 'DW1QbgLTiCgFxOBbvPKdjlLvIgo1',
            testEmail: 'testehakke@gufum.com',
            authToken: 'test_token_1754676066482_email_signature_test'
        };

        // Test data
        const signatureData = {
            professional: {
                signatureText: "Best regards,",
                includeName: true,
                includeTitle: true,
                includeCompany: true,
                includePhone: true,
                includeEmail: true,
                includeWebsite: false,
                includeSocials: false,
                signatureStyle: 'professional',
                isActive: true
            },
            modern: {
                signatureText: "Thank you for your time,",
                includeName: true,
                includeTitle: true,
                includeCompany: true,
                includePhone: true,
                includeEmail: true,
                includeWebsite: true,
                includeSocials: true,
                signatureStyle: 'modern',
                isActive: true
            },
            minimal: {
                signatureText: "Cheers,",
                includeName: true,
                includeTitle: false,
                includeCompany: false,
                includePhone: true,
                includeEmail: true,
                includeWebsite: false,
                includeSocials: false,
                signatureStyle: 'minimal',
                isActive: true
            }
        };

        let testResults = {
            config: false,
            auth: false,
            professional: false,
            modern: false,
            minimal: false,
            get: false,
            email: false,
            delete: false,
            enterprise: false,
            performance: false,
            error: false
        };

        // Utility functions
        function log(message, type = 'info') {
            const logArea = document.getElementById('log-area');
            const timestamp = new Date().toLocaleTimeString();
            const color = type === 'error' ? '#dc3545' : type === 'success' ? '#28a745' : '#667eea';
            logArea.innerHTML += `<div style="color: ${color};">[${timestamp}] ${message}</div>`;
            logArea.scrollTop = logArea.scrollHeight;
        }

        function updateStatus(elementId, status, message = '') {
            const element = document.getElementById(elementId);
            element.className = `status ${status}`;
            element.textContent = status.charAt(0).toUpperCase() + status.slice(1);
            if (message) log(message, status);
        }

        function updateProgress() {
            const total = Object.keys(testResults).length;
            const completed = Object.values(testResults).filter(Boolean).length;
            const percentage = (completed / total) * 100;
            
            document.getElementById('progress-fill').style.width = percentage + '%';
            
            // Update step indicators
            for (let i = 1; i <= 5; i++) {
                const step = document.getElementById(`step-${i}`);
                if (i <= Math.ceil(percentage / 20)) {
                    step.className = 'step completed';
                } else if (i === Math.ceil(percentage / 20)) {
                    step.className = 'step active';
                } else {
                    step.className = 'step';
                }
            }
        }

        // API functions
        async function makeRequest(endpoint, method = 'GET', data = null) {
            try {
                const options = {
                    method: method,
                    headers: {
                        'Authorization': `Bearer ${config.authToken}`,
                        'Content-Type': 'application/json'
                    }
                };

                if (data) {
                    options.body = JSON.stringify(data);
                }

                const response = await fetch(`${config.baseURL}${endpoint}`, options);
                const result = await response.json();
                
                return { success: response.ok, data: result, status: response.status };
            } catch (error) {
                return { success: false, error: error.message };
            }
        }

        // Test functions
        async function testConfiguration() {
            log('üîß Testing configuration...');
            updateStatus('config-status', 'pending');
            
            try {
                const response = await makeRequest('/');
                if (response.success || response.status === 401) {
                    updateStatus('config-status', 'success');
                    testResults.config = true;
                    log('‚úÖ Configuration test passed - server is responding', 'success');
                } else {
                    updateStatus('config-status', 'error');
                    log('‚ùå Configuration test failed - server not responding', 'error');
                }
            } catch (error) {
                updateStatus('config-status', 'error');
                log('‚ùå Configuration test failed: ' + error.message, 'error');
            }
            updateProgress();
        }

        async function testAuthentication() {
            log('üîê Testing authentication...');
            updateStatus('auth-status', 'pending');
            
            try {
                const response = await makeRequest(`/Users/${config.testUserId}/email-signature`);
                if (response.success || response.status === 401) {
                    updateStatus('auth-status', 'success');
                    testResults.auth = true;
                    log('‚úÖ Authentication test passed', 'success');
                } else {
                    updateStatus('auth-status', 'error');
                    log('‚ùå Authentication test failed', 'error');
                }
            } catch (error) {
                updateStatus('auth-status', 'error');
                log('‚ùå Authentication test failed: ' + error.message, 'error');
            }
            updateProgress();
        }

        async function createSignature(style) {
            log(`üìù Creating ${style} signature...`);
            updateStatus(`${style}-status`, 'pending');
            
            try {
                const response = await makeRequest(`/Users/${config.testUserId}/email-signature`, 'PATCH', signatureData[style]);
                if (response.success) {
                    updateStatus(`${style}-status`, 'success');
                    testResults[style] = true;
                    log(`‚úÖ ${style} signature created successfully`, 'success');
                } else {
                    updateStatus(`${style}-status`, 'error');
                    log(`‚ùå ${style} signature creation failed: ${response.data?.message || 'Unknown error'}`, 'error');
                }
            } catch (error) {
                updateStatus(`${style}-status`, 'error');
                log(`‚ùå ${style} signature creation failed: ${error.message}`, 'error');
            }
            updateProgress();
        }

        async function previewSignature(style) {
            log(`üëÄ Previewing ${style} signature...`);
            
            try {
                const response = await makeRequest(`/api/Users/${config.testUserId}/signature-preview`, 'POST', { ...signatureData[style] });
                if (response.success && response.data.preview) {
                    const previewBox = document.getElementById('signature-preview');
                    const previewContent = document.getElementById('preview-content');
                    previewContent.innerHTML = response.data.preview;
                    previewBox.style.display = 'block';
                    log(`‚úÖ ${style} signature preview generated`, 'success');
                } else {
                    log(`‚ùå ${style} signature preview failed`, 'error');
                }
            } catch (error) {
                log(`‚ùå ${style} signature preview failed: ${error.message}`, 'error');
            }
        }

        async function getSignature() {
            log('üìã Getting current signature...');
            updateStatus('get-status', 'pending');
            
            try {
                const response = await makeRequest(`/Users/${config.testUserId}/email-signature`);
                if (response.success) {
                    updateStatus('get-status', 'success');
                    testResults.get = true;
                    log('‚úÖ Signature retrieved successfully', 'success');
                    if (response.data.signature) {
                        log(`üìù Current signature style: ${response.data.signature.signatureStyle}`);
                    }
                } else {
                    updateStatus('get-status', 'error');
                    log('‚ùå Failed to get signature', 'error');
                }
            } catch (error) {
                updateStatus('get-status', 'error');
                log('‚ùå Failed to get signature: ' + error.message, 'error');
            }
            updateProgress();
        }

        async function testEmail() {
            log('üìß Testing email signature preview...');
            updateStatus('email-status', 'pending');
            
            try {
                // Instead of sending a real email, test the signature preview functionality
                const response = await makeRequest(`/api/Users/${config.testUserId}/signature-preview`, 'POST', {
                    ...signatureData.professional
                });
                
                if (response.success && response.data && response.data.preview) {
                    updateStatus('email-status', 'success');
                    testResults.email = true;
                    log('‚úÖ Email signature preview test passed', 'success');
                    log('üìù Preview HTML generated successfully', 'info');
                } else {
                    updateStatus('email-status', 'error');
                    log('‚ùå Email signature preview test failed', 'error');
                }
            } catch (error) {
                updateStatus('email-status', 'error');
                log('‚ùå Email signature preview test failed: ' + error.message, 'error');
            }
            updateProgress();
        }

        async function deleteSignature() {
            log('üóëÔ∏è Deleting signature...');
            updateStatus('delete-status', 'pending');
            
            try {
                const response = await makeRequest(`/Users/${config.testUserId}/email-signature`, 'DELETE');
                if (response.success) {
                    updateStatus('delete-status', 'success');
                    testResults.delete = true;
                    log('‚úÖ Signature deleted successfully', 'success');
                } else {
                    updateStatus('delete-status', 'error');
                    log('‚ùå Failed to delete signature', 'error');
                }
            } catch (error) {
                updateStatus('delete-status', 'error');
                log('‚ùå Failed to delete signature: ' + error.message, 'error');
            }
            updateProgress();
        }

        async function testEnterprise() {
            log('üè¢ Testing enterprise bulk operations...');
            updateStatus('enterprise-status', 'pending');
            
            try {
                // First create a test enterprise
                const uniqueName = `Test Enterprise for Signatures ${Date.now()}`;
                const enterpriseResponse = await makeRequest('/enterprise', 'POST', {
                    name: uniqueName,
                    description: 'Test enterprise for email signature testing',
                    industry: 'Technology',
                    website: 'https://testenterprise.com',
                    colorScheme: '#007bff',
                    companySize: '10-50'
                });
                
                if (!enterpriseResponse.success) {
                    throw new Error('Failed to create test enterprise: ' + (enterpriseResponse.data?.message || `status ${enterpriseResponse.status}`));
                }
                
                const enterpriseId = enterpriseResponse.data?.data?.enterprise?.id || enterpriseResponse.data?.enterprise?.id || enterpriseResponse.data?.id;
                log(`‚úÖ Created test enterprise: ${enterpriseId}`);
                
                // Now test bulk signature update
                const response = await makeRequest(`/api/enterprise/${enterpriseId}/bulk-signatures`, 'PATCH', {
                    signatureTemplate: signatureData.professional.signatureText,
                    signatureStyle: 'professional',
                    includeName: true,
                    includeTitle: true,
                    includeCompany: true,
                    includePhone: true,
                    includeEmail: true
                });
                
                // The bulk operation might fail if there are no users in the enterprise, which is expected for a new enterprise
                // We consider this a success if we can reach the endpoint and get a meaningful response
                if (response.success || (response.status === 404 && response.data && response.data.message === 'No users found for this enterprise')) {
                    updateStatus('enterprise-status', 'success');
                    testResults.enterprise = true;
                    if (response.success) {
                        log('‚úÖ Enterprise bulk operations test passed', 'success');
                    } else {
                        log('‚úÖ Enterprise bulk operations test passed (no users in enterprise - expected)', 'success');
                    }
                } else {
                    updateStatus('enterprise-status', 'error');
                    log('‚ùå Enterprise bulk operations test failed', 'error');
                }
            } catch (error) {
                updateStatus('enterprise-status', 'error');
                log('‚ùå Enterprise bulk operations test failed: ' + error.message, 'error');
            }
            updateProgress();
        }

        async function testPerformance() {
            log('‚ö° Testing performance under load...');
            updateStatus('performance-status', 'pending');
            
            try {
                const promises = [];
                for (let i = 0; i < 3; i++) {
                    promises.push(makeRequest(`/Users/${config.testUserId}/email-signature`, 'PATCH', {
                        ...signatureData.professional,
                        signatureText: `Performance Test ${i + 1}: ${signatureData.professional.signatureText}`
                    }));
                }
                
                const results = await Promise.all(promises);
                const successCount = results.filter(r => r.success).length;
                
                if (successCount === results.length) {
                    updateStatus('performance-status', 'success');
                    testResults.performance = true;
                    log(`‚úÖ Performance test passed - ${successCount}/${results.length} operations successful`, 'success');
                } else {
                    updateStatus('performance-status', 'error');
                    log(`‚ùå Performance test failed - ${successCount}/${results.length} operations successful`, 'error');
                }
            } catch (error) {
                updateStatus('performance-status', 'error');
                log('‚ùå Performance test failed: ' + error.message, 'error');
            }
            updateProgress();
        }

        async function testErrorHandling() {
            log('üîç Testing error handling...');
            updateStatus('error-status', 'pending');
            
            try {
                // Test invalid user ID
                const response = await makeRequest('/Users/invalid-user-id/email-signature');
                if (response.status === 404 || response.status === 400) {
                    updateStatus('error-status', 'success');
                    testResults.error = true;
                    log('‚úÖ Error handling test passed', 'success');
                } else {
                    updateStatus('error-status', 'error');
                    log('‚ùå Error handling test failed', 'error');
                }
            } catch (error) {
                updateStatus('error-status', 'error');
                log('‚ùå Error handling test failed: ' + error.message, 'error');
            }
            updateProgress();
        }

        // Main test runner
        async function runAllTests() {
            log('üöÄ Starting comprehensive test suite...', 'success');
            document.getElementById('run-all-btn').disabled = true;
            document.getElementById('run-all-btn').innerHTML = '<span class="loading"></span> Running...';
            
            // Reset all statuses
            Object.keys(testResults).forEach(key => {
                testResults[key] = false;
                const statusElement = document.getElementById(`${key}-status`);
                if (statusElement) {
                    updateStatus(`${key}-status`, 'pending');
                }
            });
            
            // Run tests in sequence
            await testConfiguration();
            await new Promise(resolve => setTimeout(resolve, 500));
            
            await testAuthentication();
            await new Promise(resolve => setTimeout(resolve, 500));
            
            await createSignature('professional');
            await new Promise(resolve => setTimeout(resolve, 500));
            
            await createSignature('modern');
            await new Promise(resolve => setTimeout(resolve, 500));
            
            await createSignature('minimal');
            await new Promise(resolve => setTimeout(resolve, 500));
            
            await getSignature();
            await new Promise(resolve => setTimeout(resolve, 500));
            
            await testEmail();
            await new Promise(resolve => setTimeout(resolve, 500));
            
            await testEnterprise();
            await new Promise(resolve => setTimeout(resolve, 500));
            
            await testPerformance();
            await new Promise(resolve => setTimeout(resolve, 500));
            
            await testErrorHandling();
            await new Promise(resolve => setTimeout(resolve, 500));
            
            // Final summary
            const total = Object.keys(testResults).length;
            const passed = Object.values(testResults).filter(Boolean).length;
            const successRate = (passed / total) * 100;
            
            log(`üìä Test Results: ${passed}/${total} tests passed (${successRate.toFixed(1)}% success rate)`, 'success');
            
            if (successRate >= 98) {
                log('üéâ All tests passed with 98%+ success rate! Email signature feature is ready for production!', 'success');
            } else {
                log('‚ö†Ô∏è Some tests failed. Please review the implementation.', 'error');
            }
            
            document.getElementById('run-all-btn').disabled = false;
            document.getElementById('run-all-btn').innerHTML = 'üöÄ Run All Tests';
        }

        function resetTests() {
            log('üîÑ Resetting all tests...', 'info');
            
            // Reset all statuses
            Object.keys(testResults).forEach(key => {
                testResults[key] = false;
                const statusElement = document.getElementById(`${key}-status`);
                if (statusElement) {
                    updateStatus(`${key}-status`, 'pending');
                }
            });
            
            // Reset progress
            document.getElementById('progress-fill').style.width = '0%';
            
            // Reset step indicators
            for (let i = 1; i <= 5; i++) {
                document.getElementById(`step-${i}`).className = 'step';
            }
            
            // Clear log
            document.getElementById('log-area').innerHTML = '<div>üîÑ All tests reset. Ready to run again...</div>';
            
            log('‚úÖ All tests reset successfully', 'success');
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            log('üéØ Email Signature Feature Test Interface Loaded', 'success');
            log('üìã Configuration loaded with prefilled test data', 'info');
            log('üöÄ Click "Run All Tests" to start comprehensive testing', 'info');
        });
    </script>
</body>
</html>
